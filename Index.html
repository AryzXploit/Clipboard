<!DOCTYPE html>
<html>
<head>
  <title>EME Fingerprint PoC</title>
</head>
<body>
  <h2>Encrypted Media Extensions Fingerprinting PoC</h2>
  <p>Cek DRM key system apa aja yang didukung browser kamu.</p>
  <pre id="output"></pre>

  <script>
    const output = document.getElementById("output");

    // List of common DRM key systems
    const keySystems = [
      "com.widevine.alpha",     // Google Widevine (Chrome/Edge/Brave)
      "com.microsoft.playready",// Microsoft PlayReady (Edge/IE)
      "org.w3.clearkey",        // ClearKey (default open spec)
      "com.apple.fps.1_0"       // Apple FairPlay (Safari)
    ];

    async function testKeySystem(keySystem) {
      try {
        const access = await navigator.requestMediaKeySystemAccess(keySystem, [{
          initDataTypes: ["cenc"],
          videoCapabilities: [{ contentType: 'video/mp4; codecs="avc1.42E01E"' }]
        }]);
        log(`✅ ${keySystem} tersedia`);
      } catch (err) {
        log(`❌ ${keySystem} tidak tersedia (${err.message})`);
      }
    }

    function log(msg) {
      console.log(msg);
      output.textContent += msg + "\n";
    }

    if (navigator.requestMediaKeySystemAccess) {
      keySystems.forEach(ks => testKeySystem(ks));
    } else {
      log("Browser tidak mendukung EME API");
    }
  </script>
</body>
</html>      navigator.requestMediaKeySystemAccess("com.widevine.alpha", [{
        initDataTypes: ["cenc"],
        videoCapabilities: [{ contentType: "video/mp4; codecs=\"avc1.42E01E\"" }]
      }])
      .then(keySystemAccess => {
        console.log("✅ EME Access:", keySystemAccess.keySystem);
        alert("✅ EME terdeteksi: " + keySystemAccess.keySystem);
      })
      .catch(err => {
        console.log("❌ EME gagal:", err);
      });
    } else {
      console.log("EME API not supported");
    }
  </script>
</body>
</html>
